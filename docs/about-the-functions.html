<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 About the Functions | Cellular Tracking Technologies: Data Tools</title>
  <meta name="description" content="This is a manual for the R data tools" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 About the Functions | Cellular Tracking Technologies: Data Tools" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a manual for the R data tools" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 About the Functions | Cellular Tracking Technologies: Data Tools" />
  
  <meta name="twitter:description" content="This is a manual for the R data tools" />
  

<meta name="author" content="Jessica Gorzo" />


<meta name="date" content="2021-05-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="CTT-FB-logo-STACKED.jpg" type="image/x-icon" />
<link rel="prev" href="start-here-example-scripts.html"/>
<link rel="next" href="localization-methods.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CTT Data Tools</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Instructions</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-github"><i class="fa fa-check"></i>How to use GitHub</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-set-up"><i class="fa fa-check"></i>Getting Set Up</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#result"><i class="fa fa-check"></i>Result</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> API</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#install-postgres"><i class="fa fa-check"></i><b>1.1</b> Install Postgres</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#your-token"><i class="fa fa-check"></i><b>1.2</b> Your Token</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r-script-api_run.r"><i class="fa fa-check"></i><b>1.3</b> R script: api_run.R</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#terminal"><i class="fa fa-check"></i><b>1.4</b> Terminal</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="start-here-example-scripts.html"><a href="start-here-example-scripts.html"><i class="fa fa-check"></i><b>2</b> Start Here: Example Scripts</a></li>
<li class="chapter" data-level="3" data-path="about-the-functions.html"><a href="about-the-functions.html"><i class="fa fa-check"></i><b>3</b> About the Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="about-the-functions.html"><a href="about-the-functions.html#data-manager"><i class="fa fa-check"></i><b>3.1</b> Data Manager</a><ul>
<li class="chapter" data-level="3.1.1" data-path="about-the-functions.html"><a href="about-the-functions.html#load_data"><i class="fa fa-check"></i><b>3.1.1</b> load_data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="about-the-functions.html"><a href="about-the-functions.html#node-health"><i class="fa fa-check"></i><b>3.2</b> Node Health</a><ul>
<li class="chapter" data-level="3.2.1" data-path="about-the-functions.html"><a href="about-the-functions.html#node_channel_plots"><i class="fa fa-check"></i><b>3.2.1</b> node_channel_plots</a></li>
<li class="chapter" data-level="3.2.2" data-path="about-the-functions.html"><a href="about-the-functions.html#node_plots"><i class="fa fa-check"></i><b>3.2.2</b> node_plots</a></li>
<li class="chapter" data-level="3.2.3" data-path="about-the-functions.html"><a href="about-the-functions.html#gps_plots"><i class="fa fa-check"></i><b>3.2.3</b> gps_plots</a></li>
<li class="chapter" data-level="3.2.4" data-path="about-the-functions.html"><a href="about-the-functions.html#export_node_channel_plots"><i class="fa fa-check"></i><b>3.2.4</b> export_node_channel_plots</a></li>
<li class="chapter" data-level="3.2.5" data-path="about-the-functions.html"><a href="about-the-functions.html#export_node_plots"><i class="fa fa-check"></i><b>3.2.5</b> export_node_plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="localization-methods.html"><a href="localization-methods.html"><i class="fa fa-check"></i><b>4</b> Localization Methods</a><ul>
<li class="chapter" data-level="4.1" data-path="localization-methods.html"><a href="localization-methods.html#primitive-weighted-average"><i class="fa fa-check"></i><b>4.1</b> Primitive: Weighted Average</a></li>
<li class="chapter" data-level="4.2" data-path="localization-methods.html"><a href="localization-methods.html#triangulation-functions"><i class="fa fa-check"></i><b>4.2</b> Triangulation Functions</a><ul>
<li class="chapter" data-level="4.2.1" data-path="localization-methods.html"><a href="localization-methods.html#data-prep"><i class="fa fa-check"></i><b>4.2.1</b> Data Prep</a></li>
<li class="chapter" data-level="4.2.2" data-path="localization-methods.html"><a href="localization-methods.html#calibration"><i class="fa fa-check"></i><b>4.2.2</b> Calibration</a></li>
<li class="chapter" data-level="4.2.3" data-path="localization-methods.html"><a href="localization-methods.html#custom-distance-function"><i class="fa fa-check"></i><b>4.2.3</b> Custom Distance Function</a></li>
<li class="chapter" data-level="4.2.4" data-path="localization-methods.html"><a href="localization-methods.html#triangulation"><i class="fa fa-check"></i><b>4.2.4</b> Triangulation</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cellular Tracking Technologies: Data Tools</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="about-the-functions" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> About the Functions</h1>
<p>There is a sub-folder within this repo named “functions” which is full of, well, scripts that contain functions! You’ll notice they’re often called (via source()) at the top of the example scripts. This loads in the custom functions that I have written to handle CTT data. Ultimately, these will be rolled into an R package.</p>
<div id="data-manager" class="section level2">
<h2><span class="header-section-number">3.1</span> Data Manager</h2>
<div id="load_data" class="section level3">
<h3><span class="header-section-number">3.1.1</span> load_data</h3>
<p><strong>Description</strong><br />
Loads data</p>
<p><strong>Usage</strong><br />
load_data(directory_name=NULL, starttime=NULL, endtime=NULL, tags=NULL)</p>
<p><strong>Arguments</strong></p>
<ul>
<li>directory_name: the input folder can contain a miscellany of raw downloaded files from the sensor station (beep data, node health, GPS) all in the same folder or subfolders. Zipped folders need to be unzipped, but compressed files do not (i.e. csv.gz files are just fine as they are).<br />
</li>
<li>starttime: POSIXct<br />
</li>
<li>endtime: POSIXct<br />
</li>
<li>tags: a vector of tag IDs</li>
</ul>
<p><strong>Value</strong><br />
The function will return a nested list where each item corresponds to:<br />
1. beep data<br />
2. node health<br />
3. GPS</p>
<p>Within each list item, there is a list for a data frame and the hardware version. Also, a column “v” has been added to the raw files indicating the hardware version.</p>
</div>
</div>
<div id="node-health" class="section level2">
<h2><span class="header-section-number">3.2</span> Node Health</h2>
<div id="node_channel_plots" class="section level3">
<h3><span class="header-section-number">3.2.1</span> node_channel_plots</h3>
<p><strong>Description</strong><br />
This function is the “engine” behind the export function. You can run it standalone with the following parameters, but you don’t have to.</p>
<p><strong>Usage</strong><br />
node_channel_plots(health, freq, ids, lat=NULL, lon=NULL)</p>
<p><strong>Arguments</strong></p>
<ul>
<li>health: the 2nd list item output by the load_data() function<br />
</li>
<li>freq: the time interval for which you want variables to be summarized<br />
</li>
<li>ids: the ID is of the format "<radio ID>_<Node ID>"<br />
</li>
<li>lat: latitude<br />
</li>
<li>lon: longitude</li>
</ul>
<p><strong>Output</strong>
The output is a nested list, where the top level is each combination of channel and node, and each item is a list of the following plots:</p>
<ol style="list-style-type: decimal">
<li>battery<br />
</li>
<li>RSSI<br />
</li>
<li>number of check-ins<br />
</li>
<li>scaled number of check-ins as line plot over scaled RSSI<br />
</li>
<li>box plot of node RSSI<br />
</li>
<li>latitude<br />
</li>
<li>longitude<br />
</li>
<li>scaled RSSI<br />
</li>
<li>dispersion</li>
</ol>
</div>
<div id="node_plots" class="section level3">
<h3><span class="header-section-number">3.2.2</span> node_plots</h3>
<p><strong>Description</strong><br />
NOTE: THIS ONLY WORKS FOR V2</p>
<p><strong>Usage</strong><br />
node_plots(health, nodes, freq, lat = NULL, lon = NULL)</p>
<p><strong>Arguments</strong></p>
<ul>
<li>health: the 2nd dataframe output by the load_data() function<br />
</li>
<li>nodes: list of nodes<br />
</li>
<li>freq: the time interval for which you want variables to be summarized<br />
</li>
<li>lat: latitude<br />
</li>
<li>lon: longitude</li>
</ul>
<p><strong>Output</strong> The output is a nested list for each node, with the following plots for each:</p>
<ol style="list-style-type: decimal">
<li>RSSI<br />
</li>
<li>number of check-ins<br />
</li>
<li>battery<br />
</li>
<li>time mismatches<br />
</li>
<li>small time mismatches</li>
</ol>
</div>
<div id="gps_plots" class="section level3">
<h3><span class="header-section-number">3.2.3</span> gps_plots</h3>
<p><strong>Description</strong><br />
Plots to visualize some GPS data</p>
<p><strong>Usage</strong><br />
gps_plots(gps, freq)</p>
<p><strong>Arguments</strong></p>
<ul>
<li>gps: the 3rd data frame from the load_data() function<br />
</li>
<li>freq: the time interval of summary</li>
</ul>
<p><strong>Output</strong><br />
1. altitude<br />
2. number of fixes</p>
</div>
<div id="export_node_channel_plots" class="section level3">
<h3><span class="header-section-number">3.2.4</span> export_node_channel_plots</h3>
<p><strong>Description</strong><br />
Export plots of node x channel data</p>
<p><strong>Usage</strong><br />
export_node_channel_plots(plotlist=NULL,health,freq=“1 hour”,out_path=getwd(),whichplots = c(3,2,1))</p>
<p><strong>Arguments</strong></p>
<ul>
<li>plotlist: allows you to pass the output of node_channel_plots() if you prefer</li>
<li>health: the 2nd data frame output by the load_data() function<br />
</li>
<li>freq: the time interval for which you want variables to be summarized<br />
</li>
<li>out_path: where you want your plots to go<br />
</li>
<li>whichplots: an index vector of of the available plots</li>
</ul>
</div>
<div id="export_node_plots" class="section level3">
<h3><span class="header-section-number">3.2.5</span> export_node_plots</h3>
<p><strong>Description</strong><br />
NOTE: THIS ONLY WORKS FOR V2<br />
same as above; index for the plots can be chosen from the list under the node_plots() description<br />
<strong>Usage</strong><br />
export_node_plots(plotlist = NULL, health,freq,out_path=getwd(), x=2, y=3, z=1)</p>
<p><strong>Arguments</strong><br />
To assign x, y and z, look at the description for node_channel_plots() and select those plot indices in the order you want them on the page.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="start-here-example-scripts.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="localization-methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-literature.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
